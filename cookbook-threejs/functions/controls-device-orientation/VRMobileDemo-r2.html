<!doctype html>
<html lang=en >
<head>
<meta charset=utf-8 />
<meta name=viewport content='width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no' />
<title>VR 2.5 Sandbox 3D</title>
<style>
</style>
</head>
<body>
<script src=http://mrdoob.github.io/three.js/build/three.min.js ></script>
<script src=http://mrdoob.github.io/three.js/examples/js/controls/OrbitControls.js ></script>
<script src=http://mrdoob.github.io/three.js/examples/js/controls//DeviceOrientationControls.js ></script>
<script>
	var renderer,
		camera,
		scene,
		viewController,
		clock,
		container;

		initialize();
		createScene();
		loop();

	function initialize() {

		css = document.head.appendChild( document.createElement( 'style' ) );
		css.innerHTML ='body { font: 12pt monospace; margin: 0; overflow: hidden; }' +
			'#i {text-decoration: none; }' +
		'';

		menu = document.body.appendChild( document.createElement( 'div' ) );
		menu.style.cssText = 'margin: 0 20px; position: absolute; ';
		menu.innerHTML = '<h2 style=margin:0; ><a href="" >' + document.title + '</a> ' +
			'<a id=i href=http://jaanga.github.io/ >&#x24D8;</a></h2>' +
			'<div id=info ></div>' +
		'';

		renderer = new THREE.WebGLRenderer( { alpha: 1, antialias: true, clearColor: 0xffffff }  );
				renderer.autoClear = false;
		renderer.setSize( window.innerWidth, window.innerHeight );

		document.body.appendChild( renderer.domElement );

		// The camera
		camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 5000);
		camera.position.set( 50, 50, 50);

		// The scene
		scene = new THREE.Scene();

		// A clock used for the controllers.
//		clock = new THREE.Clock();

		// An orbit controller for PC, it's disabled on mobile devices.
		viewController = new THREE.OrbitControls(camera, renderer.domElement);
//				viewController.rotateUp(Math.PI / 4);
//				viewController.target.set(camera.position.x + 0.1, camera.position.y, camera.position.z);

		// Set the correct size of all this world!
//		resize();

		// On mobile we want to use the device orientation
		var onOrientationChanged = function (event) {
			if (!event.alpha) {
				return;
			}

			viewController = new THREE.DeviceOrientationControls(camera, true);
			viewController.connect();
			viewController.update();
			resize();

			window.removeEventListener("deviceorientation", onOrientationChanged);
		};

		window.addEventListener("deviceorientation", onOrientationChanged, false);
		window.addEventListener("resize", resize, false);
	}

	function createScene() {

		material = new THREE.MeshNormalMaterial();

		var width = 500,
			depth = 500,
			blockSize = 50;

		var ground = new THREE.Mesh(new THREE.BoxGeometry(width, 1, depth), material);
		scene.add(ground);

		// And few cubes...
		var geometry = new THREE.BoxGeometry(blockSize, blockSize, blockSize);
		var material = new THREE.MeshNormalMaterial({
//					map: THREE.ImageUtils.loadTexture("images/checker_blue.png")
		});

		function random(min, max) {
			return (Math.random() * (max - min) + min);
		}

		for (var i = 0; i < 6; i++) {
			var mesh = new THREE.Mesh(geometry, material);
			mesh.position.x = random(-width / 2 + blockSize, width / 2 - blockSize);
			mesh.position.y = blockSize / 2;
			mesh.position.z = random(-depth / 2 + blockSize, depth / 2 - blockSize);
			mesh.receiveShadow = true;
			mesh.castShadow = true;
			scene.add(mesh);
		}
	}

	function resize() {
		renderer.setSize(window.innerWidth, window.innerHeight);

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
	}

	function loop() {
		requestAnimationFrame(loop);
		viewController.update();
		renderer.render( scene, camera );
	}

</script>
</body>
</html>